(this["webpackJsonpaudio-player"]=this["webpackJsonpaudio-player"]||[]).push([[0],[,,,,,,,,,,function(e,t,n){"use strict";n.r(t),n.d(t,"SET_CONTEXT",(function(){return a})),n.d(t,"ADD_SONG",(function(){return r})),n.d(t,"CHANGE_PATH",(function(){return c})),n.d(t,"CHANGE_CURRENT_SONG_INDEX",(function(){return o})),n.d(t,"SET_CURRENT_TRACK_TIME",(function(){return i})),n.d(t,"SET_CURRENT_TRACK_DURATION",(function(){return l})),n.d(t,"DISABLE_SONG_SELECT",(function(){return u})),n.d(t,"ENABLE_SONG_SELECT",(function(){return s})),n.d(t,"SET_PAUSED",(function(){return m})),n.d(t,"CHANGE_VOLUME",(function(){return d})),n.d(t,"ADD_SONG_DURATION",(function(){return f}));var a="SET_CONTEXT",r="ADD_SONG",c="CHANGE_PATH",o="CHANGE_CURRENT_SONG_INDEX",i="SET_CURRENT_TRACK_TIME",l="SET_CURRENT_TRACK_DURATION",u="DISABLE_SONG_SELECT",s="ENABLE_SONG_SELECT",m="SET_PAUSED",d="CHANGE_VOLUME",f="ADD_SONG_DURATION"},,,,,,,,,,,,,,,,,,,function(e,t,n){},,function(e,t,n){e.exports=n.p+"static/media/song1.3c036f40.mp3"},,,function(e,t,n){e.exports=n(57)},,,,,function(e,t,n){},function(e,t,n){},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(21),o=n.n(c),i=(n(39),n(16)),l=(n(40),n(7)),u=n(4),s=n(10),m=s.SET_CONTEXT,d=s.ADD_SONG,f=s.CHANGE_PATH,p=s.CHANGE_CURRENT_SONG_INDEX,_=(s.SET_CURRENT_TRACK_TIME,s.DISABLE_SONG_SELECT),E=s.ENABLE_SONG_SELECT,b=s.SET_PAUSED,y=s.CHANGE_VOLUME,O=s.SET_CURRENT_TRACK_DURATION,v=s.ADD_SONG_DURATION;function N(e){return{type:f,payload:e}}function g(e){return{type:p,payload:e}}function h(e){return{type:O,payload:e}}function j(){return{type:E}}function T(e){return{type:b,payload:e}}n(45),n(46);var S=function(){var e=Object(a.useRef)(),t=Object(a.useRef)(),n=Object(a.useRef)(),c=Object(u.c)((function(e){return{paused:e.paused,analyzer:e.analyzer}})),o=c.paused,i=c.analyzer,l=Object(a.useCallback)((function(){var a=new Uint8Array(i.frequencyBinCount);i.getByteFrequencyData(a),a[0]>190&&(n.current.style.filter="hue-rotate(".concat(Math.round(360*Math.random()),"deg)")),t.current.style.width=a[0]/5+"%",t.current.style.paddingBottom=a[0]/5+"%",n.current.style.boxShadow="0 0 ".concat(a[0]/3,"px #0f0, inset 0 0 ").concat(a[0]/3,"px #0f0"),e.current=requestAnimationFrame(l)}),[i]);return Object(a.useEffect)((function(){return o?cancelAnimationFrame(e.current):e.current=requestAnimationFrame(l),function(){return cancelAnimationFrame(e.current)}}),[o,l]),r.a.createElement("div",{ref:t,className:"circle"},r.a.createElement("div",{ref:n,className:"circle__before"}),r.a.createElement("div",{className:"circle__after"}))},A=n(2),R=(n(47),n(20)),C=n.n(R);var x=function(e){var t=e.audioRef,n=Object(a.useState)(0),c=Object(l.a)(n,2),o=c[0],i=c[1],s=Object(a.useRef)(),m=Object(u.c)((function(e){return{duration:e.currentTrackDuration,paused:e.paused}})),d=m.duration,f=m.paused;return Object(a.useEffect)((function(){return f?clearInterval(s.current):s.current=setInterval((function(){i(t.current.currentTime)}),200),function(){clearInterval(s.current)}}),[f,t]),r.a.createElement("div",{onClick:function(e){var n=e.currentTarget.getBoundingClientRect().width;e.stopPropagation(),t.current.currentTime=t.current.duration/n*e.clientX,i(t.current.duration/n*e.clientX)},className:"controls__band"},r.a.createElement("div",{style:{width:t.current?t.current.currentTime/(d/100)+"%":0},className:"controls__current-time"}),r.a.createElement("div",{className:"controls__timer"},r.a.createElement(C.a,{format:"mm:ss / "},1e3*o),r.a.createElement(C.a,{format:"mm:ss"},d?Math.floor(1e3*d):0)))};var D=function(e){var t=e.stopSongHandler,n=e.backwardSongHandler,a=e.clickHandler,c=e.nextSongHandler,o=Object(u.b)(),i=Object(u.c)((function(e){return{paused:e.paused,volume:e.volume}})),l=i.paused,s=i.volume;return r.a.createElement("div",{className:"controls__buttons"},r.a.createElement("i",{className:"fa fa-stop controls__stop","aria-hidden":"true",onClick:t}),r.a.createElement("i",{className:"fa fa-step-backward controls__step-backward","aria-hidden":"true",onClick:n}),r.a.createElement("div",{className:"controls__play-stop",onClick:a},l?r.a.createElement("i",{className:"fa fa-play controls__play","aria-hidden":"true"}):r.a.createElement("i",{className:"fa fa-pause controls__pause","aria-hidden":"true"})),r.a.createElement("i",{className:"fa fa-step-forward controls__step-forward","aria-hidden":"true",onClick:c}),r.a.createElement("input",{className:"controls__volume",type:"range",min:"0",max:"100",value:s,onChange:function(e){var t;o((t=e.currentTarget.value,{type:y,payload:t}))}}))};var w=function(e){var t=e.open,n=["c","o","n","t","r","o","l","s"],a=Object(A.e)(n.length,{opacity:t?0:1,transform:t?"translateX(100%)":"translateX(0%)",config:A.b.wobbly});return r.a.createElement("div",{className:"controls__title"},a.map((function(e,t){return r.a.createElement(A.a.div,{className:"controls__letter",style:e,key:t},n[t])})))};var k=function(e){var t=e.clickHandler,n=e.connection,c=e.rewindToTheend,o=e.rewindToTheStart,i=e.stop,s=e.audioRef,m=Object(a.useState)(!1),d=Object(l.a)(m,2),f=d[0],p=d[1],_=Object(u.b)(),E=Object(u.c)((function(e){return{currentIndex:e.currentIndex,songSelectDisabled:e.songSelectDisabled,songs:e.songs}})),b=E.currentIndex,y=E.songSelectDisabled,O=E.songs,v=Object(A.d)({rotate:f?"rotate(-45deg)":"rotate(45deg)",height:f?"100px":"0px"}),h=v.rotate,j=v.height,T=function(){o(),i()};return r.a.createElement(A.a.div,{style:{height:j},className:"controls",onClick:function(e){return e.stopPropagation()}},r.a.createElement("div",{className:"controls__hide-button",onClick:function(){p(!f)}},r.a.createElement(w,{open:f}),r.a.createElement(A.a.span,{style:{transform:h},className:"controls__icon-line controls__icon-line_top"}),r.a.createElement(A.a.span,{style:{transform:h.interpolate((function(e){return"".concat(e," rotate(90deg)")}))},className:"controls__icon-line controls__icon-line_bottom"})),r.a.createElement(x,{audioRef:s}),r.a.createElement(D,{stopSongHandler:T,backwardSongHandler:function(){b>0?y||(n(),_(g(b-1)),_(N(O[b-1].path))):T()},clickHandler:t,nextSongHandler:function(){y||c()}}))};n(29);var I=function(e){var t=e.connect,n=Object(A.d)((function(){return{to:{opacity:0},from:{opacity:1},immediate:!t}})),a=Object(l.a)(n,1)[0];return r.a.createElement(A.a.div,{style:a,className:"icon icon_pause"})};var G=function(){var e=Object(A.d)({to:{opacity:0},from:{opacity:1}});return r.a.createElement(A.a.div,{style:e,className:"icon icon_play"})};n(50);var U=function(e){var t=e.loading;return r.a.createElement("span",{className:"playlist__empty"},t?"loading...":"Playlist is empty")};n(51);var H=function(e){var t=e.duration,n=e.name,a=e.path,c=e.index,o=e.connection,i=e.props,l=Object(u.b)(),s=Object(u.c)((function(e){return{currentIndex:e.currentIndex,songSelectDisabled:e.songSelectDisabled}})),m=s.currentIndex,d=s.songSelectDisabled,f=m===c?"song playlist__song song_active":"song playlist__song";return r.a.createElement(A.a.div,{style:i,className:f,onClick:function(){d||(o(),l(N(a)),l(g(c)))}},r.a.createElement("h3",{className:"song__name"},n),r.a.createElement("span",{className:"song__duration"},t?r.a.createElement(C.a,{format:"mm:ss"},Math.floor(1e3*t)):"--:--"))};var L=function(e){var t=e.connection,n=Object(a.useState)(!1),c=Object(l.a)(n,2),o=c[0],i=c[1],s=Object(a.useState)(!1),m=Object(l.a)(s,2),f=m[0],p=m[1],_=Object(u.c)((function(e){return e.songs})),E=Object(u.b)(),b=Object(a.useRef)(),y=Object(A.d)({ref:b,width:o?"400px":"0px",opacity:o?0:1}),O=y.width,v=y.opacity,N=Object(a.useRef)(),g=Object(A.f)(o?_:[],(function(e){return e.name}),{ref:N,unique:!0,trail:50,from:{opacity:0,right:"-100%"},enter:{opacity:1,right:"0%"},leave:{opacity:0,right:"0%"}}),h=Object(A.d)({rotate:o?"rotate(45deg)":"rotate(-45deg)"}).rotate;return Object(A.c)(o?[b,N]:[N,b],[0,o?.1:.8]),r.a.createElement(A.a.div,{style:{width:O},className:"playlist",onClick:function(e){return e.stopPropagation()}},r.a.createElement("header",{className:"playlist__header"},r.a.createElement("label",{className:"playlist__download",htmlFor:"download"},r.a.createElement("i",{className:"fa fa-cloud-download playlist__icon","aria-hidden":"true"})),r.a.createElement("input",{style:{display:"none"},name:"download",type:"file",id:"download",onChange:function(e){e.stopPropagation(),Object.values(e.currentTarget.files).forEach((function(e){var t="",n=_.find((function(t){return t.name===e.name}));if("audio/mpeg"!==e.type&&(t="\u043d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u0442\u0438\u043f \u0444\u0430\u0439\u043b\u0430 \u0443 ".concat(e.name," - \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 mp3")),n||t)t&&alert(t);else{var a=new FileReader;a.readAsDataURL(e),a.onloadstart=function(){p(!0)},a.onload=function(){var t;p(!1),E((t={name:e.name,path:a.result},{type:d,payload:t}))},a.onerror=function(){console.log(a.error)}}}))},multiple:!0})),!_.length&&r.a.createElement(U,{loading:f}),r.a.createElement("div",{className:"playlist__songs"},g.map((function(e,n){var a=e.item,c=e.props;return r.a.createElement(H,{key:n,index:n,name:a.name,duration:a.duration,path:a.path,connection:t,props:c})}))),r.a.createElement("div",{className:"playlist__button",onClick:function(){i(!o)}},r.a.createElement(A.a.h3,{style:{opacity:v},className:"playlist__title"},"playlist"),r.a.createElement(A.a.span,{style:{transform:h},className:"playlist__icon-line playlist__icon-line_top"}),r.a.createElement(A.a.span,{style:{transform:h.interpolate((function(e){return"".concat(e," rotate(90deg)")}))},className:"playlist__icon-line playlist__icon-line_bottom"})))},M=n(6);n(52);var z=function(){var e=Object(a.useRef)(),t=Object(a.useRef)(),n=Object(a.useRef)(),c=Object(a.useRef)(),o=Object(a.useRef)(),i=Object(a.useRef)(),l=Object(a.useRef)(),s=Object(a.useRef)(),m=Object(u.c)((function(e){return{paused:e.paused,analyzer:e.analyzer}})),d=m.paused,f=m.analyzer,p=Object(a.useCallback)((function(){var a=new Uint8Array(f.frequencyBinCount);f.getByteFrequencyData(a),a[0]>190&&(s.current.style.filter="hue-rotate(".concat(Math.round(360*Math.random()),"deg)")),t.current.style.transform="scale(".concat(1+a[0]/25/300,")"),n.current.style.transform="scale(".concat(1+a[0]/25/100,")"),c.current.style.width="".concat(a[40]/2.5,"%"),o.current.style.width="".concat(a[40]/2.5,"%"),i.current.style.height="calc(100% - ".concat(a[40]/2.5,"%)"),l.current.style.height="calc(100% - ".concat(a[40]/2.5,"%)"),s.current.style.boxShadow="0 0 ".concat(a[0]/10,"px #0f0, inset 0 0 ").concat(a[0]/10,"px #0f0"),e.current=requestAnimationFrame(p)}),[f]);return Object(a.useEffect)((function(){return d?cancelAnimationFrame(e.current):e.current=requestAnimationFrame(p),function(){return cancelAnimationFrame(e.current)}}),[d,p]),r.a.createElement("div",{className:"text"},r.a.createElement("div",{ref:t,className:"text__background"}),r.a.createElement("div",{ref:n,className:"text__container"},r.a.createElement("div",{ref:c,className:"text__line text__line_top"}),r.a.createElement("div",{ref:i,className:"text__line text__line_left"}),r.a.createElement("h3",{ref:s,className:"text__title"},"TEXT"),r.a.createElement("div",{ref:o,className:"text__line text__line_bottom"}),r.a.createElement("div",{ref:l,className:"text__line text__line_right"})))};n(53);var B=function(){var e=new Array(80).fill(""),t=Object(a.useRef)(),n=Object(a.useRef)(),c=Object(a.useRef)(),o=Object(a.useRef)(!0),i=Object(u.c)((function(e){return{paused:e.paused,analyzer:e.analyzer}})),l=i.paused,s=i.analyzer,m=Object(a.useCallback)((function(){var e=new Uint8Array(s.frequencyBinCount);if(s.getByteFrequencyData(e),e[0]>210&&(c.current.style.filter="brightness(120%)"),e[0]>190&&o.current){o.current=!1;var a=Math.round(360*Math.random());t.current.style.filter="hue-rotate(".concat(a,"deg)"),c.current.style.filter="hue-rotate(".concat(a,"deg)"),setTimeout((function(){o.current=!0}),1e3)}c.current.style.backgroundImage="linear-gradient(45deg, transparent ".concat(60-e[0]/10,"%, rgba(34, 101, 163, .5)), linear-gradient(-45deg, transparent ").concat(60-e[0]/10,"%, rgba(34, 101, 163, .5))"),Array.from(t.current.children).forEach((function(t,n){t.style.transform="rotate(".concat(5*n-45,"deg) translateY(").concat(e[10*n]/2.5,"%)")})),n.current=requestAnimationFrame(m)}),[s]);return Object(a.useEffect)((function(){return l?cancelAnimationFrame(n.current):n.current=requestAnimationFrame(m),function(){return cancelAnimationFrame(n.current)}}),[l,m]),r.a.createElement("div",{className:"spotlight"},r.a.createElement("div",{ref:c,className:"spotlight__background"}),r.a.createElement("div",{className:"spotlight__container"},r.a.createElement("div",{ref:t,className:"spotlight__circle"},e.map((function(e,t){return r.a.createElement("div",{key:t,className:"spotlight__line"})}))),r.a.createElement("div",{className:"spotlight__photo"})))};var F=function(){var e=Object(a.useState)(!1),t=Object(l.a)(e,2),n=t[0],c=t[1],o=Object(u.b)(),i=Object(u.c)((function(e){return{currentSongIndex:e.currentIndex,path:e.path,songs:e.songs,context:e.context,analyzer:e.analyzer,src:e.src,paused:e.paused,volume:e.volume}})),s=i.currentSongIndex,d=i.path,f=i.songs,p=i.context,E=i.analyzer,b=i.src,y=i.paused,O=i.volume,A=Object(a.useRef)();Object(a.useEffect)((function(){o(function(e,t){return{type:m,payload:{context:e,audioRef:t}}}(new AudioContext,A.current)),setTimeout((function(){o(h(A.current.duration))}),1e3)}),[o]),Object(a.useEffect)((function(){n&&(o({type:_}),C(),setTimeout((function(){o(h(A.current.duration)),o({type:v,payload:s}),o(j())}),1e3))}),[d,o]),Object(a.useEffect)((function(){if(n)return document.addEventListener("keyup",D),function(){document.removeEventListener("keypup",D)}}),[n]),Object(a.useEffect)((function(){A.current.volume=O/100}),[O]);var R=function(){p&&!n&&(p.resume(),b.connect(E),E.connect(p.destination),c(!0))},C=function(){A.current.play(),o(T(!1))},x=function(){A.current.pause(),o(T(!0))},D=function(e){32!==e.keyCode&&void 0!==e.keyCode||(R(),A.current.paused?C():x())};return r.a.createElement("div",{className:"visualizer",onClick:D},r.a.createElement("audio",{src:d,ref:A,onEnded:function(){f.length>s+1?(o(N(f[s+1].path)),o(g(s+1))):(console.log("\u043f\u0435\u0441\u043d\u0438 \u0437\u0430\u043a\u043e\u043d\u0447\u0438\u043b\u0438\u0441\u044c"),o(T(!0)),o(j()))}}),r.a.createElement("div",{className:"visualizer__effect"},r.a.createElement(M.c,null,r.a.createElement(M.a,{exact:!0,path:"/audioVisualizer",render:function(){return r.a.createElement(S,null)}}),r.a.createElement(M.a,{path:"/text",render:function(){return r.a.createElement(z,null)}}),r.a.createElement(M.a,{path:"/spotlight",component:B})),y?r.a.createElement(I,{connect:n}):r.a.createElement(G,null)),r.a.createElement(k,{audioRef:A,clickHandler:D,connection:R,rewindToTheend:function(){A.current.currentTime=A.current.duration},rewindToTheStart:function(){A.current.currentTime=0},stop:x}),r.a.createElement(L,{connection:R}))},X=(n(55),n(3)),q=n(33);n(56);var P=function(){return r.a.createElement("div",{className:"menu__logo"},r.a.createElement("i",{className:"fa fa-music menu__logo-icon","aria-hidden":"true"}))};var K=function(e){var t=e.props,n=e.item,c=e.path,o=Object(a.useState)(!1),u=Object(l.a)(o,2),s=u[0],m=u[1],d=Object(A.d)({gradient:s?0:100}).gradient.interpolate((function(e){return"linear-gradient(to left, white 0%, white ".concat(e,"%, gold 0%, gold 100%)")}));return r.a.createElement(i.b,{className:"menu__nav",activeClassName:"menu__nav_active",to:c,exact:!0},r.a.createElement(A.a.div,{key:n.id,className:"menu__item",style:Object(X.a)({},t),onMouseEnter:function(){return m(!0)},onMouseLeave:function(){return m(!1)}},r.a.createElement(A.a.span,{style:{backgroundImage:d},className:"menu__link"},n.title)))};var V=function(){var e=Object(a.useState)(!1),t=Object(l.a)(e,2),n=t[0],c=t[1],o=Object(a.useRef)(),i=Object(A.d)({ref:o,width:n?"40%":"0%",transform:n?"transtaleX(350px)":"translateX(-100px)",from:{width:"0%"}}),u=i.transform,s=i.width,m=Object(q.a)(i,["transform","width"]),d=Object(a.useRef)(),f=Object(A.f)(n?[{title:"circle",path:"/audioVisualizer",id:"0"},{title:"text",path:"/text",id:"1"},{title:"spotlight",path:"/spotlight",id:"2"}]:[],(function(e){return e.title}),{ref:d,unique:!0,from:{opacity:0,transform:"scale(0)"},enter:[{opacity:0,transform:"scale(1)"},{opacity:1,transform:"scale(1)"}],leave:{opacity:0,transform:"scale(0)"},config:{duration:300}}),p=Object(a.useRef)(),_=Object(A.e)(3,{ref:p,transform:n?"scale(0)":"scale(1)",config:{duration:200}});return Object(A.c)(n?[p,o,d]:[d,o,p],[0,n?.1:.2]),r.a.createElement(A.a.div,{style:Object(X.a)(Object(X.a)({},m),{},{width:s}),className:"menu",onMouseEnter:function(){c(!0)},onMouseLeave:function(){c(!1)}},r.a.createElement(P,null),r.a.createElement("div",{className:"menu__icon"},_.map((function(e,t){return r.a.createElement(A.a.div,{className:"menu__line",style:e,key:t})}))),f.map((function(e){var t=e.item,n=e.props;return r.a.createElement(K,{item:t,key:t.id,props:n,path:t.path})})),r.a.createElement(A.a.div,{style:Object(X.a)(Object(X.a)({},m),{},{transform:u,width:s}),className:"menu__blink"}))};var J=function(){return r.a.createElement("div",{className:"audio-player"},r.a.createElement(V,null),r.a.createElement(F,null))};var W=function(){return r.a.createElement(i.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(J,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Y=n(19),$=n(13),Q=n(10),Z=n(31),ee={context:null,analyzer:null,src:null,songs:[],path:n.n(Z).a,currentIndex:-1,currentTime:0,currentTrackDuration:0,songSelectDisabled:!1,paused:!0,volume:100};var te=n(32),ne=Object(Y.c)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Q.SET_CONTEXT:return Object(X.a)(Object(X.a)({},e),{},{context:t.payload.context,analyzer:t.payload.context.createAnalyser(),src:t.payload.context.createMediaElementSource(t.payload.audioRef)});case Q.ADD_SONG:return Object(X.a)(Object(X.a)({},e),{},{songs:[].concat(Object($.a)(e.songs),[t.payload])});case Q.CHANGE_PATH:return Object(X.a)(Object(X.a)({},e),{},{path:t.payload});case Q.CHANGE_CURRENT_SONG_INDEX:return Object(X.a)(Object(X.a)({},e),{},{currentIndex:t.payload});case Q.SET_CURRENT_TRACK_TIME:return Object(X.a)(Object(X.a)({},e),{},{currentTime:t.payload});case Q.SET_CURRENT_TRACK_DURATION:return Object(X.a)(Object(X.a)({},e),{},{currentTrackDuration:t.payload});case Q.DISABLE_SONG_SELECT:return Object(X.a)(Object(X.a)({},e),{},{songSelectDisabled:!0});case Q.ENABLE_SONG_SELECT:return Object(X.a)(Object(X.a)({},e),{},{songSelectDisabled:!1});case Q.SET_PAUSED:return Object(X.a)(Object(X.a)({},e),{},{paused:t.payload});case Q.CHANGE_VOLUME:return Object(X.a)(Object(X.a)({},e),{},{volume:t.payload});case Q.ADD_SONG_DURATION:return Object(X.a)(Object(X.a)({},e),{},{songs:e.songs.map((function(n,a){return t.payload===a&&(n.duration=e.currentTrackDuration),n}))});default:return e}}),Object(Y.a)(te.a));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(u.a,{store:ne},r.a.createElement(W,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[34,1,2]]]);
//# sourceMappingURL=main.a439200e.chunk.js.map